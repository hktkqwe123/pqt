服务端产生一对Kyber1024密钥对，在硬盘上新建pubkey文件，把公钥写入其中；若当前目录已有文件以pubkey命名，则为了避免覆盖数据而直接退出程序，因此请勿把您的重要文件放在当前目录以pubkey命名。服务端和客户端需要SSH或TLS传输pubkey，日后量子计算机破解了SSH和TLS就只发现传输了Kyber1024公钥，看不见敏感数据。

本软件尚未内置SSH和TLS，需额外调用。 传输协议：客户端拿到pubkey，先另外产生自己的Kyber1024密钥对，拿服务端的pubkey加密客户端的公钥再发给服务端；服务端拿私钥解密客户端的公钥，产生三把AES256位密钥，再用客户端的公钥加密这些AES密钥，发给客户端。根据 https://www.ambit.inc/pdf/KyberDrive.pdf ：Kyber-1024 is known to have 254 bits of classical security and 230 bits of quantum security (coreSVP hardness).必需增强AES加密，因此需要三把AES256位密钥（模仿3DES，三把DES密钥）。服务端产生随机数值，拿客户端的公钥加密这个数值，发给客户端，这个数值是为了避免相同明文产生相同密文的（紧接着还会提到）。客户端接收浏览器请求，还不能直接拿之前协商好的三把AES密钥加密，假设相同请求产生相同密文就造成明文和密文一一对应，因此客户端：计算浏览器请求的哈希值、拿之前协商好的随机数值，修改哈希值、长度、oid、nid、浏览器请求，再拿三把AES密钥加密修改后的数据，发给服务端，服务端解密之后根据之前协商好的随机数值恢复浏览器请求，校验哈希值（最后转发给Privoxy，第三方老牌代理）。

更多细节：协商好随机数值，避免相同明文产生相同密文，但是随机数值也要一直变换，要哈希一下之前的随机数值得到哈希值作为新的随机数值。根据 https://crypto.stackexchange.com/questions/19493/is-there-a-string-thats-hash-is-equal-to-itself ，如果哈希值与原文一致，就把哈希值的第一个UTF8代码加一。